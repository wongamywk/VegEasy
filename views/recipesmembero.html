<!DOCTYPE html>
<html ng-app="plunker">
<head>
  <link href='http://fonts.googleapis.com/css?family=Lato:100' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Rajdhani' rel='stylesheet' type='text/css'>
    <!-- Material Design Lite CSS -->
    <link rel="stylesheet" href="../public/css/material.indigo-pink.min.css">
    <!-- Material Design icon font -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">

<style>
/*-----------Simple reset-------------*/
*{
	margin:0;
	padding:0;
}
/*-------------------------General Styles--------------------------*/
body{
	font:15px/1.3 'Lato', sans-serif;
	color: #5e5b64;
	text-align:center;
}

a, a:visited {
	outline:none;
	color:#389dc1;
}

a:hover{
	text-decoration:none;
}

section, footer, header, aside, nav{
	display: block;
}


/*-------------------------The search input--------------------------*/
.bar{
	background-color:#BC9B5D;

	background-image:-webkit-linear-gradient(top, #BC9B5D;, #5392ad);
	background-image:-moz-linear-gradient(top, #BC9B5D;, #5392ad);
	background-image:linear-gradient(top, #BC9B5D;, #5392ad);

	box-shadow: 0 1px 1px #ccc;
	border-radius: 1px;
	width: 400px;
	padding: 10px;
	margin: 50px auto 20px;
	position:relative;
}

.bar input{
	background:#fff no-repeat 13px 13px;
	background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkU5NEY0RTlFMTA4NzExRTM5RTEzQkFBQzMyRjkyQzVBIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkU5NEY0RTlGMTA4NzExRTM5RTEzQkFBQzMyRjkyQzVBIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6RTk0RjRFOUMxMDg3MTFFMzlFMTNCQUFDMzJGOTJDNUEiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6RTk0RjRFOUQxMDg3MTFFMzlFMTNCQUFDMzJGOTJDNUEiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4DjA/RAAABK0lEQVR42pTSQUdEURjG8dOY0TqmPkGmRcqYD9CmzZAWJRHVRIa0iFYtM6uofYaiEW2SRJtEi9YxIklp07ZkWswu0v/wnByve7vm5ee8M+85zz1jbt9Os+WiGkYdYxjCOx5wgFeXUHmtBSzpcCGa+5BJTCjEP+0nKWAT8xqe4ArPGEEVC1hHEbs2oBwdXkM7mj/JLZrad437sCGHOfUtcziutuYu2v8XUFF/4f6vMK/YgAH1HxkBYV60AR31gxkBYd6xAeF3VzMCwvzOBpypX8V4yuFRzX2d2gD/l5yjH4fYQEnzkj4fae5rJulF2sMXVrAsaTWttRFu4Osb+1jEDT71/ZveyhouTch2fINQL9hKefKjuYFfuznXWzXMTabyrvfyIV3M4vhXgAEAUMs7K0J9UJAAAAAASUVORK5CYII=);

	border: none;
	width: 100%;
	line-height: 19px;
	padding: 11px 0;

	border-radius: 2px;
	box-shadow: 0 2px 8px #c4c4c4 inset;
	text-align: left;
	font-size: 14px;
	font-family: inherit;
	color: #738289;
	font-weight: bold;
	outline: none;
	text-indent: 40px;
}

ul{
	list-style: none;
	width: 428px;
	margin: 0 auto;
	text-align: left;
}

ul li{
	border-bottom: 1px solid #ddd;
	padding: 10px;
	overflow: hidden;
}

ul li img{
	width:60px;
	height:60px;
	float:left;
	border:none;
}

ul li p{
	margin-left: 75px;
	font-weight: bold;
	padding-top: 12px;
	color:#6e7a7f;
}</style>
</head>

    <script>//document.write('<base href="' + document.location + '" />');</script>
    <script data-require="angular.js@1.2.x" src="https://code.angularjs.org/1.2.16/angular.js" data-semver="1.2.16"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.25/angular-resource.min.js"></script>
  <body ng-controller="MainCtrl">
    <p>Welcome! <%= usr %></p>
    <div class="bar">
      <!-- Create a binding between the searchString model and the text field -->
      <input type="text" ng-model="search" placeholder="Enter the name of the recipe" />
    </div>

    <ul>
			<li ng-repeat="project in projects | filter:search">
				<p><a href="{{project.f2f_url}}" target="_blank"><img ng-src="{{project.image_url}}" /></a>
				{{project.recipe_id}}. {{project.title}}
        <button ng-click="remove(project)" style="position: absolute; right: 100;" class="mdl-button mdl-js-ripple-effect mdl-button--fab mdl-button--mini-fab">
        <i class="material-icons">add</i>
        </button>
        </p>
			</li>
		</ul>

    <script>

    angular.module('plunker', ['ngResource'])

    .factory('Todos', ['$http', function($http){
  return $http.get('/getfavlist/<%=usr%>');
  }])

//app.controller('MainCtrl', function($scope) {


// Controller
.controller('MainCtrl', ['$scope', 'Todos', function ($scope, Todos) {
Todos.success(function(data){

$scope.projects = data[0].fav;
}).error(function(data, status){
console.log(data, status);
$scope.projects = [];
});

$scope.remove = function(project){
  for(var i = $scope.projects.length - 1; i >= 0; i--){
    if($scope.projects[i].f2f_url == project.f2f_url){
        $scope.projects.splice(i,1);
    //    $location.url('/removefav/');
    }
  }
}
/*
$scope.remove = function(index){
  var todo = $scope.todos[index];
  Todos.remove({id: todo._id}, function(){
    $scope.todos.splice(index, 1);
  });
}*/

}])

</script>
  </body>

</html>
<!DOCTYPE html>
<html ng-app="plunker">
<head>
  <link href='http://fonts.googleapis.com/css?family=Lato:100' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Rajdhani' rel='stylesheet' type='text/css'>
    <!-- Material Design Lite CSS -->
    <link rel="stylesheet" href="../public/css/material.indigo-pink.min.css">
    <!-- Material Design icon font -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">

<style>
/*-----------Simple reset-------------*/
*{
	margin:0;
	padding:0;
}
/*-------------------------General Styles--------------------------*/
body{
	font:15px/1.3 'Lato', sans-serif;
	color: #5e5b64;
	text-align:center;
}

a, a:visited {
	outline:none;
	color:#389dc1;
}

a:hover{
	text-decoration:none;
}

section, footer, header, aside, nav{
	display: block;
}


/*-------------------------The search input--------------------------*/
.bar{
	background-color:#BC9B5D;

	background-image:-webkit-linear-gradient(top, #BC9B5D;, #5392ad);
	background-image:-moz-linear-gradient(top, #BC9B5D;, #5392ad);
	background-image:linear-gradient(top, #BC9B5D;, #5392ad);

	box-shadow: 0 1px 1px #ccc;
	border-radius: 1px;
	width: 400px;
	padding: 10px;
	margin: 50px auto 20px;
	position:relative;
}

.bar input{
	background:#fff no-repeat 13px 13px;
	border: none;
	width: 70%;
	line-height: 19px;
	padding: 11px 0;

	border-radius: 2px;
	box-shadow: 0 2px 8px #c4c4c4 inset;
	text-align: left;
	font-size: 14px;
	font-family: inherit;
	color: #738289;
	font-weight: bold;
	outline: none;
	text-indent: 40px;
}

ul{
	list-style: none;
	width: 428px;
	margin: 0 auto;
	text-align: left;
}

ul li{
	border-bottom: 1px solid #ddd;
	padding: 10px;
	overflow: hidden;
}

ul li img{
	width:60px;
	height:60px;
	float:left;
	border:none;
}

ul li p{
	margin-left: 75px;
	font-weight: bold;
	padding-top: 12px;
	color:#6e7a7f;
}</style>
</head>

    <script>//document.write('<base href="' + document.location + '" />');</script>
    <script data-require="angular.js@1.2.x" src="https://code.angularjs.org/1.2.16/angular.js" data-semver="1.2.16"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.25/angular-resource.min.js"></script>
  <body ng-controller="MainCtrl">
    <p>Welcome! <%= usr %></p>
    <div class="bar">
      <!-- Create a binding between the searchString model and the text field -->
      <input type="text" ng-model="search" placeholder="Enter the name of the recipe" />
      <button id="search" class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-color--grey">search</button>

    </div>

    <ul>
			<li ng-repeat="project in projects | filter:search">
				<p><a href="{{project.f2f_url}}" target="_blank"><img ng-src="{{project.image_url}}" /></a>
				{{project.recipe_id}}. {{project.title}}
        <button ng-click="remove(project)" style="position: absolute; right: 100;" class="mdl-button mdl-js-ripple-effect mdl-button--fab mdl-button--mini-fab">
        <i class="material-icons">delete</i>
        </button>
        </p>
			</li>
		</ul>

    <script>

    angular.module('plunker', ['ngResource'])

    .factory('Todos', ['$http', function($http){
      var qry = search;
  return $http.get('http://food2fork.com/api/search?key=b1a8c8b6be3102f257733188baec47ab&q=vegetarian%20'+qry);
  }])

//app.controller('MainCtrl', function($scope) {


// Controller
.controller('MainCtrl', ['$scope', 'Todos', function ($scope, Todos) {
Todos.success(function(data){

$scope.projects = data[0].fav;
}).error(function(data, status){
console.log(data, status);
$scope.projects = [];
});

$scope.remove = function(project){
  for(var i = $scope.projects.length - 1; i >= 0; i--){
    if($scope.projects[i].f2f_url == project.f2f_url){
        $scope.projects.splice(i,1);
    //    $location.url('/removefav/');
    }
  }
}
/*
$scope.remove = function(index){
  var todo = $scope.todos[index];
  Todos.remove({id: todo._id}, function(){
    $scope.todos.splice(index, 1);
  });
}*/

}])

</script>
  </body>

</html>
